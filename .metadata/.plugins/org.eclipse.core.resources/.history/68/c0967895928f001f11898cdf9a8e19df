/*
 * software_timer.c
 *
 *  Created on: Sep 21, 2024
 *      Author: PC
 */

#include "software_timer.h"

int timer_counters[TIMER_COUNT] = {0};  // Mảng bộ đếm thời gian
int timer_flags[TIMER_COUNT] = {0};      // Mảng cờ thời gian

void setTimer(int timer_id, int duration) {
    if (timer_id >= 0 && timer_id < TIMER_COUNT) {
        timer_counters[timer_id] = duration;
        timer_flags[timer_id] = 0;
    }
}

void timerRun() {
    for (int i = 0; i < TIMER_COUNT; i++) {
        if (timer_counters[i] > 0) {
            timer_counters[i]--;
            if (timer_counters[i] <= 0) {
                timer_flags[i] = 1;
            }
        }
    }
}
